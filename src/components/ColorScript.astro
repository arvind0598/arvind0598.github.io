<script is:inline>
  let colors = [
    "text-red-700 decoration-red-700 dark:text-red-400 dark:decoration-red-400",
    "text-blue-700 decoration-blue-700 dark:text-blue-400 dark:decoration-blue-400",
    "text-amber-700 decoration-amber-700 dark:text-amber-400 dark:decoration-amber-400",
    "text-pink-700 decoration-pink-700 dark:text-pink-400 dark:decoration-pink-400",
    "text-emerald-700 decoration-emerald-700 dark:text-emerald-400 dark:decoration-emerald-400",
  ];

  function getRandomColor() {
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function removeColorClasses(element) {
    colors.forEach((colorString) => {
      const classes = colorString.split(" ");
      element.classList.remove(...classes);
    });
  }

  function setRandomLinkColors() {
    Array.from(document.getElementsByTagName("a")).forEach((el) => {
      const baseColor = getRandomColor();
      const hoverColor = getRandomColor();

      removeColorClasses(el);

      el.classList.add(...baseColor.split(" "));

      el.dataset.hoverColor = hoverColor;
      el.dataset.baseColor = baseColor;
      el.dataset.text = el.textContent;
      el.classList.add("gradient-link");
    });
  }

  function setColorHoverListener() {
    Array.from(document.querySelectorAll("a")).forEach((el) => {
      el.addEventListener("mouseover", () => {
        Array.from(document.getElementsByTagName("a")).forEach((otherEl) => {
          if (otherEl !== el) {
            const newColor = getRandomColor();
            const newHoverColor = getRandomColor();

            removeColorClasses(otherEl);
            otherEl.classList.add(...newColor.split(" "));
            otherEl.dataset.baseColor = newColor;
            otherEl.dataset.hoverColor = newHoverColor;
          }
        });

        if (el.dataset.hoverColor) {
          removeColorClasses(el);
          el.classList.add(...el.dataset.hoverColor.split(" "));
        }
      });

      el.addEventListener("mouseout", () => {
        if (el.dataset.baseColor) {
          removeColorClasses(el);
          el.classList.add(...el.dataset.baseColor.split(" "));
        }
      });
    });
  }

  (function () {
    setRandomLinkColors();
    setColorHoverListener();
  })();
</script>
